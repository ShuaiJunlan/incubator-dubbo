<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="651px" preserveAspectRatio="none" style="width:887px;height:651px;" version="1.1" viewBox="0 0 887 651" width="887px" zoomAndPan="magnify"><defs><filter height="300%" id="f1kkx2ca099oza" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="156" x="366.5" y="22.9951">Dubbo服务发现时序图</text><rect fill="#FFFFFF" filter="url(#f1kkx2ca099oza)" height="104.5313" style="stroke: #000000; stroke-width: 2.0;" width="435" x="295" y="312.3906"/><rect fill="#FFFFFF" filter="url(#f1kkx2ca099oza)" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="581" x="295" y="430.9219"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="75" x2="75" y1="68.5938" y2="610.7188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="223" x2="223" y1="68.5938" y2="610.7188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="370" x2="370" y1="68.5938" y2="610.7188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="513" x2="513" y1="68.5938" y2="610.7188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="655" x2="655" y1="68.5938" y2="610.7188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="798" x2="798" y1="68.5938" y2="610.7188"/><rect fill="#FEFECE" filter="url(#f1kkx2ca099oza)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="8" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="15" y="53.292">ReferenceConfig</text><rect fill="#FEFECE" filter="url(#f1kkx2ca099oza)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="8" y="609.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="15" y="629.7139">ReferenceConfig</text><rect fill="#FEFECE" filter="url(#f1kkx2ca099oza)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="152" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="159" y="53.292">Protocol$Adaptive</text><rect fill="#FEFECE" filter="url(#f1kkx2ca099oza)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="152" y="609.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="159" y="629.7139">Protocol$Adaptive</text><rect fill="#FEFECE" filter="url(#f1kkx2ca099oza)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="305" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="312" y="53.292">RegistryProtocol</text><rect fill="#FEFECE" filter="url(#f1kkx2ca099oza)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="305" y="609.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="312" y="629.7139">RegistryProtocol</text><rect fill="#FEFECE" filter="url(#f1kkx2ca099oza)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="131" x="446" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="117" x="453" y="53.292">MulticastRegistry</text><rect fill="#FEFECE" filter="url(#f1kkx2ca099oza)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="131" x="446" y="609.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="117" x="453" y="629.7139">MulticastRegistry</text><rect fill="#FEFECE" filter="url(#f1kkx2ca099oza)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="591" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="598" y="53.292">FailbackRegistry</text><rect fill="#FEFECE" filter="url(#f1kkx2ca099oza)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="591" y="609.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="598" y="629.7139">FailbackRegistry</text><rect fill="#FEFECE" filter="url(#f1kkx2ca099oza)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="730" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="737" y="53.292">RegistryDirectory</text><rect fill="#FEFECE" filter="url(#f1kkx2ca099oza)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="730" y="609.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="737" y="629.7139">RegistryDirectory</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="75" x2="117" y1="99.7266" y2="99.7266"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="117" x2="117" y1="99.7266" y2="112.7266"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="76" x2="117" y1="112.7266" y2="112.7266"/><polygon fill="#A80036" points="86,108.7266,76,112.7266,86,116.7266,82,112.7266" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="82" y="94.6606">get()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="75" x2="117" y1="141.8594" y2="141.8594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="117" x2="117" y1="141.8594" y2="154.8594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="76" x2="117" y1="154.8594" y2="154.8594"/><polygon fill="#A80036" points="86,150.8594,76,154.8594,86,158.8594,82,154.8594" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="82" y="136.7935">init()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="75" x2="117" y1="183.9922" y2="183.9922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="117" x2="117" y1="183.9922" y2="196.9922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="76" x2="117" y1="196.9922" y2="196.9922"/><polygon fill="#A80036" points="86,192.9922,76,196.9922,86,200.9922,82,196.9922" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="82" y="178.9263">createProxy()</text><polygon fill="#A80036" points="211.5,222.125,221.5,226.125,211.5,230.125,215.5,226.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="75" x2="217.5" y1="226.125" y2="226.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="82" y="221.0591">refer()</text><polygon fill="#A80036" points="358.5,251.2578,368.5,255.2578,358.5,259.2578,362.5,255.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="223.5" x2="364.5" y1="255.2578" y2="255.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="230.5" y="250.1919">refer()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="370.5" x2="412.5" y1="284.3906" y2="284.3906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="412.5" x2="412.5" y1="284.3906" y2="297.3906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="371.5" x2="412.5" y1="297.3906" y2="297.3906"/><polygon fill="#A80036" points="381.5,293.3906,371.5,297.3906,381.5,301.3906,377.5,297.3906" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="377.5" y="279.3247">doRefer()</text><path d="M295,312.3906 L479,312.3906 L479,319.3906 L469,329.3906 L295,329.3906 L295,312.3906 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="104.5313" style="stroke: #000000; stroke-width: 2.0;" width="435" x="295" y="312.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="139" x="310" y="325.4575">do service register</text><polygon fill="#A80036" points="501.5,346.6563,511.5,350.6563,501.5,354.6563,505.5,350.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="370.5" x2="507.5" y1="350.6563" y2="350.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="377.5" y="345.5903">register()</text><polygon fill="#A80036" points="643.5,375.7891,653.5,379.7891,643.5,383.7891,647.5,379.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513.5" x2="649.5" y1="379.7891" y2="379.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="520.5" y="374.7231">register()</text><polygon fill="#A80036" points="524.5,404.9219,514.5,408.9219,524.5,412.9219,520.5,408.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="518.5" x2="654.5" y1="408.9219" y2="408.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="530.5" y="403.856">doRegister()</text><path d="M295,430.9219 L493,430.9219 L493,437.9219 L483,447.9219 L295,447.9219 L295,430.9219 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="581" x="295" y="430.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="153" x="310" y="443.9888">do service subscribe</text><polygon fill="#A80036" points="786,465.1875,796,469.1875,786,473.1875,790,469.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="370.5" x2="792" y1="469.1875" y2="469.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="377.5" y="464.1216">subscribe()</text><polygon fill="#A80036" points="524.5,494.3203,514.5,498.3203,524.5,502.3203,520.5,498.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="518.5" x2="797" y1="498.3203" y2="498.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="530.5" y="493.2544">subscribe()</text><polygon fill="#A80036" points="643.5,523.4531,653.5,527.4531,643.5,531.4531,647.5,527.4531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513.5" x2="649.5" y1="527.4531" y2="527.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="520.5" y="522.3872">subscribe()</text><polygon fill="#A80036" points="524.5,552.5859,514.5,556.5859,524.5,560.5859,520.5,556.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="518.5" x2="654.5" y1="556.5859" y2="556.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="530.5" y="551.52">doSubscribe()</text><polygon fill="#A80036" points="86,588.7188,76,592.7188,86,596.7188,82,592.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="80" x2="369.5" y1="592.7188" y2="592.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="92" y="587.6528">return invoker</text><!--
@startuml
title Dubbo服务发现时序图
ReferenceConfig -> ReferenceConfig: get()
ReferenceConfig -> ReferenceConfig: init()
ReferenceConfig -> ReferenceConfig: createProxy()
ReferenceConfig -> "Protocol$Adaptive": refer()
"Protocol$Adaptive" -> RegistryProtocol: refer()
RegistryProtocol -> RegistryProtocol: doRefer()

group do service register

    RegistryProtocol -> MulticastRegistry: register()
    MulticastRegistry -> FailbackRegistry: register()
    FailbackRegistry -> MulticastRegistry: doRegister()
end

group do service subscribe

RegistryProtocol -> RegistryDirectory: subscribe()
RegistryDirectory -> MulticastRegistry: subscribe()
MulticastRegistry -> FailbackRegistry: subscribe()
FailbackRegistry -> MulticastRegistry: doSubscribe()

end 

RegistryProtocol - -> ReferenceConfig: return invoker
@enduml

PlantUML version 1.2019.06(Sat May 25 01:10:25 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_201-b09
Operating System: Linux
OS Version: 4.15.0-52-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>